{"version":3,"sources":["../static/js/2.cb33467a.chunk.js","routes/Login/model/index.js","routes/Login/service/index.js"],"names":["webpackJsonp","305","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default","n","__WEBPACK_IMPORTED_MODULE_1_dva_router__","__WEBPACK_IMPORTED_MODULE_2__service__","namespace","state","loggedIn","message","user","subscriptions","setup","_ref","history","dispatch","listen","_ref2","pathname","localStorage","removeItem","effects","login","a","mark","_ref3","_ref4","_ref5","status","data","payload","call","put","wrap","_context","prev","next","sent","setItem","JSON","stringify","type","push","stop","this","logout","_","_ref6","_context2","reducers","loginSuccess","_ref7","assign","loginError","_ref8","310","_asyncToGenerator","fn","gen","apply","arguments","Promise","resolve","reject","step","key","arg","info","error","done","then","err","d","_callee","params","abrupt","setTimeout","password","name","_x"],"mappings":"AAAAA,cAAc,IAERC,IACA,SAAUC,EAAQC,EAAqBC,GAE7C,YACAC,QAAOC,eAAeH,EAAqB,cAAgBI,OAAO,GAC7C,IAAIC,GAA0DJ,EAAoB,IAC9EK,EAAkEL,EAAoBM,EAAEF,GACxFG,EAA2CP,EAAoB,IAE/DQ,GADmDR,EAAoBM,EAAEC,GAChCP,EAAoB,KCRtFD,GAAA,SACEU,UAAW,QAEXC,OACEC,UAAU,EACVC,QAAS,GACTC,SAGFC,eACEC,MADa,SAAAC,GACgB,GAArBC,GAAqBD,EAArBC,OAAqBD,GAAZE,QACf,OAAOD,GAAQE,OAAO,SAAAC,GACH,gBADqBA,EAAfC,UAErBC,aAAaC,WAAW,YAMhCC,SACGC,MADMpB,EAAAqB,EAAAC,KAAA,QAAAF,GAAAG,EAAAC,GAAA,GAAAC,GAAAC,EAAAnB,EAAAoB,EACEC,EADFL,EACEK,QAAaC,EADfL,EACeK,KAAMC,EADrBN,EACqBM,GADrB,OAAA9B,GAAAqB,EAAAU,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,aAAAF,GAAAE,KAAA,EAEiCL,EAAK1B,EAAA,EAAOyB,EAF7C,WAAAH,EAAAO,EAAAG,KAEET,EAFFD,EAEEC,OAAQnB,EAFVkB,EAEUlB,QAASoB,EAFnBF,EAEmBE,MACpBD,EAHC,CAAAM,EAAAE,KAAA,eAIHjB,cAAamB,QAAQ,OAAQC,KAAKC,UAAUX,IAJzCK,EAAAE,KAAA,GAKGJ,GACJS,KAAM,eACNX,QAASD,GAPR,eAAAK,GAAAE,KAAA,GASGJ,EAAI5B,EAAA,YAAYsC,KAAK,KATxB,SAAAR,EAAAE,KAAA,uBAAAF,GAAAE,KAAA,GAWGJ,GACJS,KAAM,aACNX,SAAUrB,YAbT,yBAAAyB,GAAAS,SAAArB,EAAAsB,QAiBNC,OAjBM3C,EAAAqB,EAAAC,KAAA,QAAAqB,GAiBCC,EAjBDC,KAiBMf,GAjBN,OAAA9B,GAAAqB,EAAAU,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAZ,MAAA,uBAAAY,GAAAL,SAAAE,EAAAD,SAsBTK,UACEC,aADQ,SACK3C,EADL4C,GACyB,GAAXrB,GAAWqB,EAAXrB,OACpB,OAAAhC,QAAAsD,UACK7C,GACHC,UAAU,EACVC,QAAS,GACTC,KAAMoB,KAGVuB,WATQ,SASG9C,EATH+C,GASuB,GAAXxB,GAAWwB,EAAXxB,OAClB,OAAAhC,QAAAsD,UACK7C,GACHC,UAAU,EACVC,QAASqB,EAAQrB,cDzCnB8C,IACA,SAAU5D,EAAQC,EAAqBC,GAE7C,YAIA,SAAS2D,GAAkBC,GAAI,MAAO,YAAW,GAAIC,GAAID,EAAGE,MAAMf,KAAKgB,UAAW,OAAO,IAAIC,SAAQ,SAASC,EAAQC,GAAQ,QAASC,GAAKC,EAAIC,GAAK,IAAI,GAAIC,GAAKT,EAAIO,GAAKC,GAASlE,EAAMmE,EAAKnE,MAAO,MAAMoE,GAAqB,WAAdL,GAAOK,GAAe,IAAGD,EAAKE,KAA2B,MAAOR,SAAQC,QAAQ9D,GAAOsE,KAAK,SAAStE,GAAOgE,EAAK,OAAOhE,IAAS,SAASuE,GAAKP,EAAK,QAAQO,IAAxHT,GAAQ9D,GAA0H,MAAOgE,GAAK,WAHtWnE,EAAoB2E,EAAE5E,EAAqB,IAAK,WAAa,MAAO0B,IAC9E,IAAIrB,GAA0DJ,EAAoB,IAC9EK,EAAkEL,EAAoBM,EAAEF,GErBjHqB,EAAA,cAAAT,GAAA2C,EAAAtD,EAAAqB,EAAAC,KAAO,QAAAiD,GAAqBC,GAArB,MAAAxE,GAAAqB,EAAAU,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,aAAAF,GAAAyC,OAAA,SACE,GAAId,SAAQ,SAACC,GAClBc,WAAW,SAAA9B,GAEPgB,EADsB,UAApBY,EAAOG,UACAjD,QAAQ,EAAMnB,QAAS,2BAAQoB,MAAOiD,KAAM,wBAE5ClD,QAAQ,EAAOnB,QAAS,iEAChC,OAPF,wBAAAyB,GAAAS,SAAA8B,EAAA7B,QAAP,iBAAAmC,GAAA,MAAAlE,GAAA8C,MAAAf,KAAAgB","file":"static/js/2.cb33467a.chunk.js","sourcesContent":["webpackJsonp([2],{\n\n/***/ 305:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(78);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_dva_router__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_dva_router___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_dva_router__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__service__ = __webpack_require__(310);\n/* harmony default export */ __webpack_exports__[\"default\"] = ({namespace:'login',state:{loggedIn:false,message:'',user:{}},subscriptions:{setup:function setup(_ref){var history=_ref.history,dispatch=_ref.dispatch;return history.listen(function(_ref2){var pathname=_ref2.pathname;if(pathname==='/user/login'){localStorage.removeItem(\"user\");}});}},effects:{login:/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function login(_ref3,_ref4){var payload=_ref3.payload;var call=_ref4.call,put=_ref4.put;var _ref5,status,message,data;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function login$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return call(__WEBPACK_IMPORTED_MODULE_2__service__[\"a\" /* login */],payload);case 2:_ref5=_context.sent;status=_ref5.status;message=_ref5.message;data=_ref5.data;if(!status){_context.next=14;break;}localStorage.setItem('user',JSON.stringify(data));_context.next=10;return put({type:'loginSuccess',payload:data});case 10:_context.next=12;return put(__WEBPACK_IMPORTED_MODULE_1_dva_router__[\"routerRedux\"].push('/'));case 12:_context.next=16;break;case 14:_context.next=16;return put({type:'loginError',payload:{message:message}});case 16:case'end':return _context.stop();}}},login,this);}),logout:/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function logout(_,_ref6){var put=_ref6.put;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function logout$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:case'end':return _context2.stop();}}},logout,this);})},reducers:{loginSuccess:function loginSuccess(state,_ref7){var payload=_ref7.payload;return Object.assign({},state,{loggedIn:true,message:'',user:payload});},loginError:function loginError(state,_ref8){var payload=_ref8.payload;return Object.assign({},state,{loggedIn:false,message:payload.message});}}});\n\n/***/ }),\n\n/***/ 310:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return login; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(78);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\nfunction _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{return Promise.resolve(value).then(function(value){step(\"next\",value);},function(err){step(\"throw\",err);});}}return step(\"next\");});};}// 模拟\nvar login=function(){var _ref=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee(params){return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt('return',new Promise(function(resolve){setTimeout(function(_){if(params.password==='admin')resolve({status:true,message:'登录成功',data:{name:'管理员'}});else resolve({status:false,message:'密码不正确，密码为admin'});},1000);}));case 1:case'end':return _context.stop();}}},_callee,this);}));return function login(_x){return _ref.apply(this,arguments);};}();\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/2.cb33467a.chunk.js","import { routerRedux } from 'dva/router';\nimport { login } from '../service';\n\nexport default {\n  namespace: 'login',\n\n  state: {\n    loggedIn: false,\n    message: '',\n    user: {},\n  },\n\n  subscriptions: {\n    setup({ history, dispatch }) {\n      return history.listen(({ pathname }) => {\n        if (pathname === '/user/login') {\n          localStorage.removeItem(\"user\");\n        }\n      });\n    },\n  },\n\n  effects: {\n    *login({ payload }, { call, put }) {\n      const {status, message, data} = yield call(login, payload)\n      if (status) {\n        localStorage.setItem('user', JSON.stringify(data));\n        yield put({\n          type: 'loginSuccess',\n          payload: data\n        })\n        yield put(routerRedux.push('/'));\n      } else {\n        yield put({\n          type: 'loginError',\n          payload: {message}\n        })\n      }\n    },\n    *logout(_, { put }) {\n\n    },\n  },\n\n  reducers: {\n    loginSuccess(state, { payload }) {\n      return {\n        ...state,\n        loggedIn: true,\n        message: '',\n        user: payload\n      };\n    },\n    loginError(state, { payload }) {\n      return {\n        ...state,\n        loggedIn: false,\n        message: payload.message\n      };\n    }\n  },\n};\n\n\n// WEBPACK FOOTER //\n// ./src/routes/Login/model/index.js","// 模拟\nexport async function login(params) {\n  return new Promise((resolve) => {\n    setTimeout(_ => {\n      if (params.password === 'admin')\n        resolve({status: true, message: '登录成功', data: {name: '管理员'}})\n      else \n        resolve({status: false, message: '密码不正确，密码为admin'})\n      }, 1000);\n  });\n}\n\n\n// WEBPACK FOOTER //\n// ./src/routes/Login/service/index.js"],"sourceRoot":""}